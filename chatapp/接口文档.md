## **接口文档**

[TOC]

端口：1.92.109.205:8080

### **1. 添加好友接口**

**接口 URL：** `/friends/add`

**请求方式：** `POST`

**功能描述：** 用于将一个用户添加为另一个用户的好友。

#### **请求头**

| 参数名       | 类型   | 是否必填 | 说明                                                       |
| ------------ | ------ | -------- | ---------------------------------------------------------- |
| Content-Type | String | 是       | 请求内容的类型，通常为 `application/x-www-form-urlencoded` |

#### **请求参数**

| 参数名         | 类型   | 是否必填 | 说明                   |
| -------------- | ------ | -------- | ---------------------- |
| username       | String | 是       | 当前用户的用户名       |
| friendUsername | String | 是       | 需要添加为好友的用户名 |

#### **请求示例**

```
POST /friends/add?username=johndoe&friendUsername=janedoe
```

#### **响应**

- **成功响应：**
  - **状态码：** 200 OK
  - **响应体：** `"好友添加成功"`
- **失败响应：**
  - **状态码：** 400 Bad Request
  - **响应体：** `"请求参数错误"` （当发生非法参数异常时）
  - **状态码：** 500 Internal Server Error
  - **响应体：** `"服务器错误"` （当发生其他未知异常时）

#### **错误码**

| 错误码 | 错误信息     | 说明                         |
| ------ | ------------ | ---------------------------- |
| 400    | 请求参数错误 | 输入的用户名或好友用户名无效 |
| 500    | 服务器错误   | 服务器发生未知错误           |

### **2. 获取好友列表接口**

**接口 URL：** `/friends/list`

**请求方式：** `GET`

**功能描述：** 获取当前用户的好友列表。

#### **请求头**

| 参数名       | 类型   | 是否必填 | 说明                                      |
| ------------ | ------ | -------- | ----------------------------------------- |
| Content-Type | String | 是       | 请求内容的类型，通常为 `application/json` |

#### **请求参数**

| 参数名   | 类型   | 是否必填 | 说明             |
| -------- | ------ | -------- | ---------------- |
| username | String | 是       | 当前用户的用户名 |

#### **请求示例**

```
GET /friends/list?username=johndoe
```

#### **响应**

- **成功响应：**
  - **状态码：** 200 OK
  - **响应体：** `["janedoe", "marksmith"]` （返回好友用户名列表）
- **失败响应：**
  - **状态码：** 500 Internal Server Error
  - **响应体：** `"服务器错误"` （当发生其他未知异常时）

#### **错误码**

| 错误码 | 错误信息   | 说明               |
| ------ | ---------- | ------------------ |
| 500    | 服务器错误 | 服务器发生未知错误 |

### **3. 发送消息接口**

**接口 URL：** `/chat/send`

**请求方式：** `POST`

**功能描述：** 允许用户发送消息给朋友。发送消息前会检查发送者和接收者是否是朋友关系。

#### **请求头**

| 参数名       | 类型   | 是否必填 | 说明                                      |
| ------------ | ------ | -------- | ----------------------------------------- |
| Content-Type | String | 是       | 请求内容的类型，通常为 `application/json` |

#### **请求参数**

请求体是一个 JSON 格式的对象，包含以下字段：

| 参数名   | 类型   | 是否必填 | 说明           |
| -------- | ------ | -------- | -------------- |
| sender   | String | 是       | 发送者的用户名 |
| receiver | String | 是       | 接收者的用户名 |
| content  | String | 是       | 消息的内容     |

#### **请求示例**

```json
{
    "sender": "johndoe",
    "receiver": "janedoe",
    "content": "你好！"
}
```

#### **响应**

- **成功响应：**

  - **状态码：** 200 OK

  - **响应体：** 返回消息的内容和发送时间戳

    ```json
    {
        "message": "消息发送成功",
        "content": "你好！",
        "timestamp": "2025-03-26T12:30:00"
    }
    ```

- **失败响应：**

  - **状态码：** 400 Bad Request

  - **响应体：** 返回错误信息

    ```json
    {
        "error": "你们还不是朋友，无法发送消息"
    }
    ```

#### **错误码**

| 错误码 | 错误信息                     | 说明                           |
| ------ | ---------------------------- | ------------------------------ |
| 400    | 你们还不是朋友，无法发送消息 | 发送者和接收者不是朋友关系     |
| 400    | 请求参数错误                 | 请求中缺少必要的参数或参数无效 |
| 500    | 服务器错误                   | 服务器发生未知错误             |

### **4. 用户注册接口**

**接口 URL：** `/auth/register`

**请求方式：** `POST`

**功能描述：** 用于注册新用户。

#### **请求头**

| 参数名       | 类型   | 是否必填 | 说明                                      |
| ------------ | ------ | -------- | ----------------------------------------- |
| Content-Type | String | 是       | 请求内容的类型，通常为 `application/json` |

#### **请求参数**

请求体是一个 JSON 格式的对象，包含以下字段：

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| username | String | 是       | 用户名 |
| password | String | 是       | 密码   |

#### **请求示例**

```json
{
    "username": "johndoe",
    "password": "password123"
}
```

#### **响应**

- **成功响应：**

  - **状态码：** 200 OK

  - **响应体：** 返回注册成功消息

    ```json
    {
        "message": "用户 johndoe 注册成功"
    }
    ```

- **失败响应：**

  - **状态码：** 400 Bad Request

  - **响应体：** 返回错误信息

    ```json
    {
        "error": "用户名已存在"
    }
    ```

#### **错误码**

| 错误码 | 错误信息     | 说明             |
| ------ | ------------ | ---------------- |
| 400    | 用户名已存在 | 用户名已经被注册 |

### **5. 用户登录接口**

**接口 URL：** `/auth/login`

**请求方式：** `POST`

**功能描述：** 用户登录，成功后返回 JWT 令牌。

#### **请求头**

| 参数名       | 类型   | 是否必填 | 说明                                      |
| ------------ | ------ | -------- | ----------------------------------------- |
| Content-Type | String | 是       | 请求内容的类型，通常为 `application/json` |

#### **请求参数**

请求体是一个 JSON 格式的对象，包含以下字段：

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| username | String | 是       | 用户名 |
| password | String | 是       | 密码   |

#### **请求示例**

```json
{
    "username": "johndoe",
    "password": "password123"
}
```

#### **响应**

- **成功响应：**

  - **状态码：** 200 OK

  - **响应体：** 返回生成的 JWT 令牌

    ```json
    {
        "token": "your_jwt_token"
    }
    ```

- **失败响应：**

  - **状态码：** 401 Unauthorized

  - **响应体：** 返回错误信息

    ```json
    {
        "error": "密码错误"
    }
    ```

#### **错误码**

| 错误码 | 错误信息   | 说明         |
| ------ | ---------- | ------------ |
| 401    | 密码错误   | 密码不匹配   |
| 401    | 用户不存在 | 用户名未找到 |



